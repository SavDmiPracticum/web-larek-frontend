# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание проекта
Проект "Веб-ларек" - это интернет-магазин с товарами для веб-разработчиков с возможностями:
- просмотра каталога товаров;
- просмотра подробного описания товаров;
- оформления заказа товаров.

## Архитектура
Проект реализует архитектурный паттерн Model - View - Presenter (MVP):
- Модель - компоненты приложения, отвечающие за работы с данными (хранит данные, предоставление к ним доступ, валидирует их, делает запросы к API, 
    уведомляет Презентер от изменение данных). 
- Отображение - компоненты приложения, отвечающие за графического интерфейс и взаимодействует с Презентером в части пользовательских событий. 
- Презентер - компонент приложения, выступающий посредником между Моделью и Отображением (реализует бизнес-логику приложения, генерирует события для Модели и 
    Отображения).

[View] <------> [Presenter] <------> [Model]

### Описание типов и классов
#### Типы данных
- PayMethod - описание методов оплаты
- Category - виды категорий
- IItem - описывает свойства товара
- IItemList - список товаров
- IBasket - описывает свойства корзины
- IOrder - описывает свойства заказа
- IOrderSuccess - успешный ответ от API
- IApiError - описывает ошибку API 
- IWebStoreApi - описывает методы работы с API
- AppEvents - перечисление событий приложения

#### Классы (компоненты)
#### Базовый код
- EventEmitter. Класс, реализующий коммуникация между Моделями и Отображениями (брокер событий). Позволяет подписываться на события, вызывать их и отписываться от них.
- Api. Базовый класс, реализующий методы взаимодействия с сервером. Родительский класс для WebStoreApi.

##### Модель (Model)
- ItemModel. Класс описывает товар (хранит данные товаре, предоставляет доступ к его свойствам, возвращает данные о товаре).
- BasketModel. Класс хранит информацию о корзине, добавляет/удаляет товар, считает итоговую сумму.
- OrderModel. Класс хранит информацию о заказе, делает проверку заказа, подсчитывает итоговую сумму заказа, отправляет данные на сервер.
- WebStoreApi. Класс для работы с API сервера, отправляет заказ, получает каталог товаров или товар по идентификатору. Наследуется от класса Api.

#### Отображение (View)
- View. Абстрактный класс для всех компонентов отображения, наследуются всеми классами отображения приложения. Предоставляет базовые методы: добавить HTML-содержимое, установить текст, изображение; показать/скрыть/деактивировать HTML-элемент, переключить класс, отрисовать элемент на странице. 
- MainPageView. Класс для отрисовки главной страницы приложения (каталога товаров, счетчика в корзине и кнопки открытия корзины).
- ItemView. Класс для отображения карточки товара в разных видах (галерея, превью, корзина).
- ModalView. Базовый класс для отображения HTML-элементов в модальном окне.
- BasketView. Класс для отрисовки корзины. Показывает список товаров и итоговую сумму.
- FormView. Базовый класс для отображения форм ввода. Реализует общую функциональность форм (валидация).
- OrderFormView. Родительский класс - FormView. Отрисовывает первую форма ввода при формировании заказа (выбор способа оплаты и ввод адреса).
- ContactFormView.  Родительский класс - FormView. Отображает вторую форму ввода при формировании заказа (ввод почты и телефона).
- SuccessFormView. Родительский класс - FormView. Показывает форму успешной отправка заказа.

#### Презентер (Presenter)
Реализуется в index.ts. Создает классы Моделей и Отображений, обрабатывает события (подписка) с использованием класса EventEmitter, вызывает методы Моделей и Отображений
при генерации событий.
Список событий приложения (тип Events)
- 'items:loaded' - загрузка приложения,
- 'item:select' - выбор/просмотр товара,
- 'item:add' - добавление товара в корзину,
- 'item:remove' - удаление товара из корзины,
- 'basket:open' - открытие корзины,
- 'basket:update' - обновление корзины,
- 'basket:close' - закрытие корзины,
- 'order:step' - переключение шага оформления заказа,
- 'order:submit' - завершить заказ,
- 'order:success' - заказ оформлен успешно,
- 'order:error' - ошибка при оформление заказа,
- 'modal:open' - открытие модального окна,
- 'modal:close' - закрытие модального окна.

